


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > PatientUtil</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.openelisglobal.patient.util</a>
</div>

<h1>Coverage Summary for Class: PatientUtil (org.openelisglobal.patient.util)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">PatientUtil</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/13)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/51)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/**
&nbsp; * The contents of this file are subject to the Mozilla Public License
&nbsp; * Version 1.1 (the &quot;License&quot;); you may not use this file except in
&nbsp; * compliance with the License. You may obtain a copy of the License at
&nbsp; * http://www.mozilla.org/MPL/
&nbsp; *
&nbsp; * Software distributed under the License is distributed on an &quot;AS IS&quot;
&nbsp; * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
&nbsp; * License for the specific language governing rights and limitations under
&nbsp; * the License.
&nbsp; *
&nbsp; * The Original Code is OpenELIS code.
&nbsp; *
&nbsp; * Copyright (C) The Minnesota Department of Health.  All Rights Reserved.
&nbsp; *
&nbsp; * Contributor(s): CIRG, University of Washington, Seattle WA.
&nbsp; */
&nbsp;package org.openelisglobal.patient.util;
&nbsp;
&nbsp;import java.util.ArrayList;
&nbsp;import java.util.List;
&nbsp;
&nbsp;import org.openelisglobal.gender.service.GenderService;
&nbsp;import org.openelisglobal.gender.valueholder.Gender;
&nbsp;import org.openelisglobal.patient.service.PatientService;
&nbsp;import org.openelisglobal.patient.valueholder.Patient;
&nbsp;import org.openelisglobal.patientidentity.service.PatientIdentityService;
&nbsp;import org.openelisglobal.patientidentity.valueholder.PatientIdentity;
&nbsp;import org.openelisglobal.person.service.PersonService;
&nbsp;import org.openelisglobal.person.valueholder.Person;
&nbsp;import org.openelisglobal.provider.service.ProviderService;
&nbsp;import org.openelisglobal.provider.valueholder.Provider;
&nbsp;import org.openelisglobal.sample.valueholder.Sample;
&nbsp;import org.openelisglobal.samplehuman.service.SampleHumanService;
&nbsp;import org.openelisglobal.spring.util.SpringContext;
&nbsp;
<b class="nc">&nbsp;public class PatientUtil {</b>
&nbsp;
&nbsp;    private static Patient UNKNOWN_PATIENT;
&nbsp;    private static Person UNKNOWN_PERSON;
&nbsp;    private static Provider UNKNOWN_PROVIDER;
<b class="nc">&nbsp;    private static PatientService patientService = SpringContext.getBean(PatientService.class);</b>
&nbsp;
&nbsp;    private static void initializeUnknowns() {
<b class="nc">&nbsp;        PersonService personService = SpringContext.getBean(PersonService.class);</b>
<b class="nc">&nbsp;        UNKNOWN_PERSON = personService.getPersonByLastName(&quot;UNKNOWN_&quot;);</b>
<b class="nc">&nbsp;        if (UNKNOWN_PERSON == null) {</b>
<b class="nc">&nbsp;            UNKNOWN_PERSON = new Person();</b>
<b class="nc">&nbsp;            UNKNOWN_PERSON.setSysUserId(&quot;1&quot;);</b>
<b class="nc">&nbsp;            UNKNOWN_PERSON.setLastName(&quot;UNKNOWN_&quot;);</b>
<b class="nc">&nbsp;            personService.insert(UNKNOWN_PERSON);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        ProviderService providerService = SpringContext.getBean(ProviderService.class);</b>
<b class="nc">&nbsp;        UNKNOWN_PROVIDER = providerService.getProviderByPerson(UNKNOWN_PERSON);</b>
&nbsp;
<b class="nc">&nbsp;        if (UNKNOWN_PROVIDER == null) {</b>
<b class="nc">&nbsp;            UNKNOWN_PROVIDER = new Provider();</b>
<b class="nc">&nbsp;            UNKNOWN_PROVIDER.setSysUserId(&quot;1&quot;);</b>
<b class="nc">&nbsp;            UNKNOWN_PROVIDER.setPerson(UNKNOWN_PERSON);</b>
<b class="nc">&nbsp;            providerService.insert(UNKNOWN_PROVIDER);</b>
&nbsp;        }
<b class="nc">&nbsp;        UNKNOWN_PROVIDER.setActive(false);</b>
&nbsp;
<b class="nc">&nbsp;        UNKNOWN_PATIENT = patientService.getPatientByPerson(UNKNOWN_PERSON);</b>
&nbsp;
<b class="nc">&nbsp;        if (UNKNOWN_PATIENT == null) {</b>
<b class="nc">&nbsp;            UNKNOWN_PATIENT = new Patient();</b>
<b class="nc">&nbsp;            UNKNOWN_PATIENT.setSysUserId(&quot;1&quot;);</b>
<b class="nc">&nbsp;            UNKNOWN_PATIENT.setPerson(UNKNOWN_PERSON);</b>
<b class="nc">&nbsp;            patientService.insert(UNKNOWN_PATIENT);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static String getDisplayDOBForPatient(String patientId, String defaultValue) {
<b class="nc">&nbsp;        Patient patient = patientService.getData(patientId);</b>
<b class="nc">&nbsp;        if (patient != null) {</b>
<b class="nc">&nbsp;            return patient.getBirthDateForDisplay();</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return defaultValue;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static List&lt;PatientIdentity&gt; getIdentityListForPatient(String patientId) {
<b class="nc">&nbsp;        PatientIdentityService identityService = SpringContext.getBean(PatientIdentityService.class);</b>
<b class="nc">&nbsp;        return identityService.getPatientIdentitiesForPatient(patientId);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static List&lt;Gender&gt; findGenders() {
<b class="nc">&nbsp;        return SpringContext.getBean(GenderService.class).getAll();</b>
&nbsp;    }
&nbsp;
&nbsp;    public static List&lt;PatientIdentity&gt; getIdentityListForPatient(Patient patient) {
<b class="nc">&nbsp;        if (patient != null) {</b>
<b class="nc">&nbsp;            PatientIdentityService identityService = SpringContext.getBean(PatientIdentityService.class);</b>
<b class="nc">&nbsp;            return identityService.getPatientIdentitiesForPatient(patient.getId());</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return new ArrayList&lt;&gt;();</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static void invalidateUnknownPatients() {
<b class="nc">&nbsp;        UNKNOWN_PATIENT = null;</b>
<b class="nc">&nbsp;        UNKNOWN_PERSON = null;</b>
<b class="nc">&nbsp;        UNKNOWN_PROVIDER = null;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Patient getUnknownPatient() {
<b class="nc">&nbsp;        if (UNKNOWN_PATIENT == null) {</b>
<b class="nc">&nbsp;            initializeUnknowns();</b>
&nbsp;        }
<b class="nc">&nbsp;        return UNKNOWN_PATIENT;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Person getUnknownPerson() {
<b class="nc">&nbsp;        if (UNKNOWN_PERSON == null) {</b>
<b class="nc">&nbsp;            initializeUnknowns();</b>
&nbsp;        }
<b class="nc">&nbsp;        return UNKNOWN_PERSON;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Provider getUnownProvider() {
<b class="nc">&nbsp;        if (UNKNOWN_PROVIDER == null) {</b>
<b class="nc">&nbsp;            initializeUnknowns();</b>
&nbsp;        }
<b class="nc">&nbsp;        return UNKNOWN_PROVIDER;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Patient getPatientByIdentificationNumber(String id) {
<b class="nc">&nbsp;        Patient patient = patientService.getPatientByNationalId(id);</b>
&nbsp;
<b class="nc">&nbsp;        if (patient == null) {</b>
<b class="nc">&nbsp;            patient = patientService.getPatientByExternalId(id);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return patient;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Patient getPatientForSample(Sample sample) {
<b class="nc">&nbsp;        return SpringContext.getBean(SampleHumanService.class).getPatientForSample(sample);</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-03-23 09:33</div>
</div>
</body>
</html>
